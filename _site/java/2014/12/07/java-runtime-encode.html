<!DOCTYPE html>
<html manifest="/vfields.appcache">
<head>
    <!--
     **
     * 建议不要看本blog源码, 暂时写得比较烂, 容朕慢慢整理(>_<)
     **
    -->
    <meta charset="utf-8" />
    <title>
        
            java的Runtime在windows系统下调用ping命令乱码
                 
    </title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="" />
    <meta name="description" content="java下调用windows的ping指令乱码" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <!-- //页面样式 -->
    <link type="text/css" href="http://127.0.0.1:4000/themes/violet/css/style.css" rel="stylesheet" />
    <link type="text/css" href="http://127.0.0.1:4000/css/font-awesome.css" rel="stylesheet">
    <link type="image/x-icon" href="http://127.0.0.1:4000/themes/violet/images/favicon.ico" rel="shortcut icon" />
    <!-- //代码样式 -->
    <link type="text/css" rel="stylesheet" href="http://127.0.0.1:4000/css/syntaxhighlighter.css"></link>
</head>
<body id="violet">
    <div id="loading" style="z-index:1;padding:5px;position:fixed;width:90px;"><img src="/css/images/loading.gif"></div>
    <div class="page-wrapper">
        <section class="head" id="violet-head">
            <header class="header" id="violet-header">
                <h1 class="logo"><a href="http://127.0.0.1:4000">vFields</a></h1>
                <h2 class="subtitle">Another Boring Blog.</h2>
            </header>
       
	    <nav class="nav" id="violet-nav">
		<ul class="nav-list">
		
		    
		    
		    <li class="nav-item ">
			<a href="/index.html">
			    首页
			</a>
			
		    </li>
		
		    
		    
		    <li class="nav-item ">
			<a href="/archives.html">
			    文章
			</a>
			
		    </li>
		
		    
		    
		    <li class="nav-item ">
			<a href="/categories.html">
			    目录
			</a>
			
		    </li>
		
		</ul>
	    </nav>
        </section>
        
	<article class="main-article main-article-page">
			<div class="violet-title">
		<h3 class="violet-title-item">java的Runtime在windows系统下调用ping命令乱码</h3>
	</div>
	<div class="violet-post">
		<p class="main-article-meta"><time pubdate="">2014-12-07</time></p>
		<div id="article_content" class="main-article-contant article_content">
			<p>   最终解决乱码的代码如下：    </p>

<textarea name="code" class="java">
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
 
public class TestRuntimeExec {
	public static void main(String[] args) {
		Runtime r = Runtime.getRuntime();
		Process p;
		try {
			p = r.exec("ping 127.0.0.1");
			BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream(), "gbk"));
			String inline;
			while ((inline = br.readLine()) != null) {
				String string = new String(inline.getBytes());
				System.out.println(string);
			}
			br.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
</textarea>

<p>   运行结果如下：
<img src="/images/20141207/java-runtime-encode01.png" alt="runtime乱码效果图" /></p>

<textarea name="code" class="java">
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream(), "gbk"));
</textarea>

<p>   其实关键就是上面这一句里面的“gbk”，如果没有后面的”gbk“，那么结果如下：
<img src="/images/20141207/java-runtime-encode02.png" alt="runtime乱码效果图" /></p>

<p>      虽然知道乱码的产生是因为编码的问题，但要找到正确的编码和在合适的位置加入编码格式，有折腾过半个钟，主要是因为自己技术太菜吧o(╯□╰)o</p>

		</div>
	</div>

	<nav class="pagination fn-clear" id="violet-paging">
		<div class="pagination-list">
			
			<a class="prev" href="/java/2014/12/07/gcj-windows.html" rel="bookmark"><i class="fa fa-chevron-circle-left"></i>gcj43在windows下编译swt项目</a>
			
			
			<a class="next" href="/java/2014/12/07/swt-text-num.html" rel="bookmark">swt的Text输入数字(包括负数和小数)<i class="fa fa-chevron-circle-right"></i></a>
			
		</div>
	</nav>
	<div class="comment">
	<div class="alert-box notice"><span>注意</span><br/>如果评论，请匿名评论。邮箱填“aa@126.com”之类的就妥了。表情神马的要手动上传图片= =!</div>
		
			<div class="comment-cnt">
				<div id="disqus_thread"></div>
			</div>
		
	</div>


	</article>
	
	<footer class="foot" id="violet-foot">
		<div class="footer fn-clear">
			<h1 class="logo">vFields</h1>
		</div>
		<div class="copyright">
			<div class="copyright-cnt fn-clear">
				<p class="text">© 2014 by wait</p>
			</div>
		</div>
	</footer>
    </div>
	
	<div id="ad">
		<span class="color color-1"></span>
		<span class="color color-2"></span>
		<span class="color color-3"></span>
		<span class="color color-5"></span>
		
		<div class="section">
		
			<h6><span class="arrow up"></span>可能是东半球最牛叉的广告</h6>
			
			<img src="http://127.0.0.1:4000/themes/violet/images/adv.gif"></img>
		</div>
	</div>
   
    <script type="text/javascript" src="http://mini.jiasule.com/framework/jquery/1.8.3/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:4000/themes/violet/js/jquery-scrollTo.min.js"></script>
	<script type="text/javascript" src="http://127.0.0.1:4000/themes/violet/js/common.js"></script>
	<script type="text/javascript" src="http://127.0.0.1:4000/js/scripts/shCore.js"></script>
	<script type="text/javascript">
		jQuery("#loading").fadeOut();
	</script>  

    
	<script type="text/javascript">
	if(document.getElementById("disqus_thread"))   
	{   
		//disqus
		var disqus_shortname = 'vfields';
		(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] ||
			document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	}
	</script>
    
</body>
</html>
