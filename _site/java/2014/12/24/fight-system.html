<!DOCTYPE html>
<html manifest="/vfields.appcache">
<head>
    <!--
     **
     * 建议不要看本blog源码, 暂时写得比较烂, 容朕慢慢整理(>_<)
     **
    -->
    <meta charset="utf-8" />
    <title>
        
            传说中的战斗系统
                 
    </title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="" />
    <meta name="description" content="2014想做的最后一件事，一个超简单的rpg战斗模拟" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <!-- //页面样式 -->
    <link type="text/css" href="http://127.0.0.1:4000/themes/violet/css/style.css" rel="stylesheet" />
    <link type="text/css" href="http://127.0.0.1:4000/css/font-awesome.css" rel="stylesheet">
    <link type="image/x-icon" href="http://127.0.0.1:4000/themes/violet/images/favicon.ico" rel="shortcut icon" />
    <!-- //代码样式 -->
    <link type="text/css" rel="stylesheet" href="http://127.0.0.1:4000/css/syntaxhighlighter.css"></link>
</head>
<body id="violet">
    <div id="loading" style="z-index:1;padding:5px;position:fixed;width:90px;"><img src="/css/images/loading.gif"></div>
    <div class="page-wrapper">
        <section class="head" id="violet-head">
            <header class="header" id="violet-header">
                <h1 class="logo"><a href="http://127.0.0.1:4000">vFields</a></h1>
                <h2 class="subtitle">Another Boring Blog.</h2>
            </header>
       
	    <nav class="nav" id="violet-nav">
		<ul class="nav-list">
		
		    
		    
		    <li class="nav-item ">
			<a href="/index.html">
			    首页
			</a>
			
		    </li>
		
		    
		    
		    <li class="nav-item ">
			<a href="/archives.html">
			    文章
			</a>
			
		    </li>
		
		    
		    
		    <li class="nav-item ">
			<a href="/categories.html">
			    目录
			</a>
			
		    </li>
		
		</ul>
	    </nav>
        </section>
        
	<article class="main-article main-article-page">
			<div class="violet-title">
		<h3 class="violet-title-item">传说中的战斗系统</h3>
	</div>
	<div class="violet-post">
		<p class="main-article-meta"><time pubdate="">2014-12-24</time></p>
		<div id="article_content" class="main-article-contant article_content">
			<p>   2014想做的第3件算是差不多了吧，虽然暂时还是做得比较烂，但其实也差不多达到我想要的效果了。如下：</p>

<p><img src="/images/20141224/fight.gif" alt="战斗系统效果图" /></p>

<p>  现在只是做了两个战斗角色进行战斗，多个的话，后端是可以支持的，但前端怎么显示还没折腾好。这个gif有点粗糙，还有那个特效是我随意偷过来的，在释放技能的时候，就播放一下，其实没神马意思，只是有时候不知道下一步怎么走的时候，就随意写一个循环嘚瑟一下，所以，不要注意细节。下面是它的流程图：</p>

<p><img src="/images/20141224/fight-flow-chart.png" alt="战斗系统流程图" /></p>

<p>  主要是读取excel表，然后根据流程图的节奏，开打，下面是excel表的数据截图：</p>

<p><img src="/images/20141224/fight-excel-data.png" alt="战斗数据来源截图" /></p>

<p>  根据流程图，其实最主要是根据各种属性判断命中、伤害、暴击等，然后技能进入冷却，而公式暂时是做的比较烂的，毕竟朕只是一个后端程序员，而不是一个数值，而且经验神马的还不够，公式是我乱配的，所以，不要问我为神马是酱紫的，公式如下：</p>

<textarea name="code" class="html">
##战力=攻击*1.3+防御*1.8+生命*1.1+速度*0.5+命中*1+闪避*1+暴击*2.1+韧性*2.1
#attack:攻击
#defense
#hp
#speed
#hit
#dodge
#crit
#tough
playerScore=#{attack} * 1.3 + #{defense} * 1.8 + #{hp} * 1.1 + #{speed} * 0.5 + #{hit} * 1 + #{dodge} * 1 + #{crit} * 2.1 + #{tough} * 2.1
 
 
##=========================战斗命中============================
##命中概率10000则表示100%命中
##命中概率=基础命中率 + (攻击方命中值 - 防御方的闪避值) * 1.1 + (攻击方战力 - 防御方战力)
#attackHit:攻击方命中值
#enemyDodge:防御方的闪避值
#srcScore:攻击方战力
#enemyScore:防御方战力
hitRate=9000 + (#{attackHit} - #{enemyDodge}) * 1.1 + #{srcScore} - #{enemyScore}
 
##=========================战斗暴击============================
##暴击概率10000则表示100%暴击
##暴击概率=攻击方的暴击值 - 防御方的韧性值
#attackCrit:攻击方的暴击值
#enemyTough:防御方的韧性值
critRate=#{attackCrit} - #{enemyTough}
 
##=========================战斗伤害============================
##总公式=(攻方的攻击力 * 0.9 / (1 + 防方的防御力 * 0.1)) * 技能加成
#srcAttack:攻方的攻击力
#enemyDefense:防方的防御力
#skillHurt:技能附加伤害
hurt=(#{srcAttack} * 0.9 / (1 + #{enemyDefense} * 0.1)) * #{skillHurt}
</textarea>

<p>  下一步应该是看一下netty源码，在搭好通信之后，把这个系统扩展成一个简单的游戏，这时候其实主要的系统就是任务系统和世界boss等；最后做一个简单的管理后台，这时候可以去学<code>js</code>、<code>css</code>，最重要的是要学习<code>mysql</code>。我想，我是停不下了吧。我也不知道，只是想学。。。</p>

		</div>
	</div>

	<nav class="pagination fn-clear" id="violet-paging">
		<div class="pagination-list">
			
			<a class="prev" href="/java/2014/12/07/swt-text-num.html" rel="bookmark"><i class="fa fa-chevron-circle-left"></i>swt的Text输入数字(包括负数和小数)</a>
			
			
		</div>
	</nav>
	<div class="comment">
	<div class="alert-box notice"><span>注意</span><br/>如果评论，请匿名评论。邮箱填“aa@126.com”之类的就妥了。表情神马的要手动上传图片= =!</div>
		
			<div class="comment-cnt">
				<div id="disqus_thread"></div>
			</div>
		
	</div>


	</article>
	
	<footer class="foot" id="violet-foot">
		<div class="footer fn-clear">
			<h1 class="logo">vFields</h1>
		</div>
		<div class="copyright">
			<div class="copyright-cnt fn-clear">
				<p class="text">© 2014 by wait</p>
			</div>
		</div>
	</footer>
    </div>
	
	<div id="ad">
		<span class="color color-1"></span>
		<span class="color color-2"></span>
		<span class="color color-3"></span>
		<span class="color color-5"></span>
		
		<div class="section">
		
			<h6><span class="arrow up"></span>可能是东半球最牛叉的广告</h6>
			
			<img src="http://127.0.0.1:4000/themes/violet/images/adv.gif"></img>
		</div>
	</div>
   
    <script type="text/javascript" src="http://mini.jiasule.com/framework/jquery/1.8.3/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:4000/themes/violet/js/jquery-scrollTo.min.js"></script>
	<script type="text/javascript" src="http://127.0.0.1:4000/themes/violet/js/common.js"></script>
	<script type="text/javascript" src="http://127.0.0.1:4000/js/scripts/shCore.js"></script>
	<script type="text/javascript">
		jQuery("#loading").fadeOut();
	</script>  

    
	<script type="text/javascript">
	if(document.getElementById("disqus_thread"))   
	{   
		//disqus
		var disqus_shortname = 'vfields';
		(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] ||
			document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	}
	</script>
    
</body>
</html>
